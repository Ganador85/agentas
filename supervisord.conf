[supervisord]
nodaemon=true

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1280x800x24 -ac +extension RANDR
autorestart=true
priority=10
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:fluxbox]
command=/usr/bin/fluxbox
environment=DISPLAY=":99"
autorestart=true
priority=20
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:x11vnc]
command=/usr/bin/x11vnc -display :99 -rfbport 5900 -forever -shared -nopw -repeat -xkb
autorestart=true
priority=30
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:novnc]
command=/usr/bin/websockify --web=/usr/share/novnc --heartbeat=30 7900 localhost:5900
autorestart=true
priority=40
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:chrome]
; Svarbiausia: CDP + jokių tarpinių/proxy
command=/usr/bin/google-chrome-stable \
  --no-first-run --no-default-browser-check \
  --no-sandbox --disable-gpu --disable-dev-shm-usage \
  --disable-features=AutomationControlled,Translate \
  --remote-debugging-address=0.0.0.0 \
  --remote-debugging-port=9222 \
  --remote-allow-origins=* \
  --no-proxy-server --proxy-bypass-list=* \
  --user-data-dir=/data \
  --lang=lt --start-maximized --window-size=1280,800 \
  https://www.barbora.lt/
environment=DISPLAY=":99",LANG="lt_LT.UTF-8",LC_ALL="lt_LT.UTF-8"
autorestart=true
priority=50
startsecs=5
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
